# 리액트로 재구축한 KALL 프로젝트 클라이언트 사이드
이전에 만들었던 2차 프로젝트를 3차 프로젝트에 돌입하면서 리액트로 변경. 모든 페이지를 리액트화함으로써 일관성 있는 데이터 관리 가능.

## 사용된 라이브러리
- 리액트(react) (가장 기본이 되는 라이브러리.)
- 리액트 라우터(react-router) (리액트를 이용해 여러 페이지를 연결하는 것을 가능하게 해주는 라이브러리)

- 리액트 쿼리(react-query) (리액트 환경에서 서버사이드의 데이터를 관리할 수 있게 해주는 라이브러리)
- 액시오스(axios) (리액트 쿼리와 함께 사용하는 프론트, 백엔드 통신 라이브러리)
- 리액트 쿠키(react-cookies) (리액트에서 쿠키를 관리할 수 있게 해주는 라이브러리)

- Emotion (스타일드 컴포넌트와 같은 CSS in JS 라이브러리)
- TailwindCSS (역시 CSS 라이브러리로 클래스 이름을 이용해 디자인을 할 수 있게 해주는 녀석)
- Twin.macro (위 두가지를 합쳐서 자유롭고 편하게 스타일링을 할 수 있게 해줌)

- 카카오 맵 API (찾아오시는 길 페이지에서 지도가 필요하기에 도입)
- 카카오 주소 API (회원 가입이나 주문 페이지에서 주소를 사용할 수 있어야하므로 도입)

## 백엔드
- 스프링 부트 사용 예정
- 데이터베이스는 Mysql + JPA

# API 가이드라인

프론트와 백엔드의 원활한 소통을 위해 아래와 같은 API 가이드라인을 남깁니다. 아래의 API 가이드는 현재 프론트에 개발된 부분만 있으며 없는 부분은 적어주시거나 하면 됩니다.

<aside>
💡 본 문서에 있는 쿼리스트링으로 구성된 엔드포인트의 경우 PathVariable 형식으로 변경 예정입니다.

ex) /users/find?type={type} ⇒ /users/find/{type}

</aside>

# API 규칙

가이드라인을 남기기 이전에 간단한 규칙에 대해 언급하고 넘어갑니다 api에는 기능을 나타내는 단어가 포함되면 곤란합니다. 자원을 나타내는 단어는 상관 없습니다. 가령 유저를 추가하는 api를 만든다고 할때 [POST /users/create] 같은 api는 지양해야 합니다. 아래는 기본적인 CRUD에 대한 설명입니다.

- `/`는 루트를 의미합니다.
- 괄호는 주소상의 변수를 의미합니다.

- [GET /]  해당 자원의 모든 데이터를 가져옵니다.
- [GET /{id}] 해당 자원의 데이터 중에서 특정 id 값을 가진 데이터를 가져옵니다.
- [POST /] 해당 자원에 데이터를 추가합니다.
- [PUT /{id}] 해당 자원 중에서 특정 아이디를 가진 데이터를 수정합니다.
- [DELETE /{id}] 특정 아이디를 가진 데이터를 삭제합니다.

# API 목록

아래의 API 목록은 필요한 API가 확인 될 때마다 추가합니다.  페이지마다 필요한 API이기 때문에 중복될 수 있습니다.

## 홈페이지

- GET /products/recent - 최근에 등록된 데이터순으로 6개 데이터

## 로그인 페이지

- POST /user/login, {아이디, 비밀번호} - 로그인

## 회원가입 페이지

- POST /users, {신규 유저 데이터} - 회원가입

## 아이디 찾기 페이지

- 아이디 찾기의 경우 이메일로 찾을 것인지 핸드폰 번호로 찾을 것인지에 따라 요청이 달라짐.
- [POST /users/find?type=email, {이름과 이메일}]
- [POST /users/find?type=phone, {이름과 핸드폰 번호}]
- 이를 대조하고 일치하는 게 있을 경우 아이디를 던져줌.

## 비밀번호 찾기 페이지

- 1차적으로 [GET /users/{id}] 필요. 아이디를 요청에 보내면 유저 데이터를 응답받음.
- 2차적으로 [PUT /users/{id}] 필요. 해당 아이디를 가진 레코드의 비밀번호를 수정하기 위함.

## 상품 리스트

- 세가지의 상품 리스트에 대응하는 api 필요.
- [GET /products/custom] 주문제작 리스트에 필요.
- [GET /products/design] 디자인 리스트에 필요.
- [GET /products/etc] 기타 물품 리스트에 필요.

## 주문 상세 페이지

- 카테고리에 상관 없이 개별 상품 아이디로 접근하는 api 필요.
- [GET /products/{id}] 개별 상품 데이터를 응답함
- [GET /products/category?category_id={cagetory}] 카테고리별로 상품 다섯개를 추천하는 리스트를 응답함.
- 1 >> id를 json에 담아서 요청하면 그 id를 받아서 상품 데이터를 얻고 보내줌.
- 2 >> 상품 데이터 안에 있는 카테고리 정보를 통해서 카테고리 별 상품 다섯개를 보내줌.

## 장바구니

- 유저가 담아놓은 상품들을 불러와야 함. 프론트에서 유저 아이디를 넘겨주면 카트에서 유저 아이디를 탐색하여 데이터를 응답해줌.
- [GET /cart/user?user_id={id}] 같은 엔드포인트 필요

## 주문 / 결제

- 주문하기를 클릭하면 선택한 상품을 로컬 스토리지에 임시로 담아서 리스팅하고 결제가 완료 되면 그때 데이터를 백엔드로 넘겨줌.
- [POST /orders, {주문 데이터}] 엔드포인트로 order 테이블에 레코드를 추가하면 백엔드에서는 이 아이디를 반환해줌.
- [POST /orderdetails, {각각의 주문 상품 데이터}] 엔드포인트로 order의 아이디를 통해 order_detail 테이블에 레코드를 추가할 수 있도록 주문한 상품 데이터를 전달해줌.

## 주문 완료 페이지

- 생성했던 order 테이블의 레코드와 order_detail 테이블의 레코드를 가져와서 최종적으로 보여주는 화면. 사용자(user)의 데이터를 요청하는 것 외에는 다른 요청은 필요 없을 것으로 예상.

## 커뮤니티 게시판

- 공지사항, 자주 묻는 질문, 이용 가이드 등은 같은 템플릿을 공유할 수 있어보임.
- 이 중 자주 묻는 질문이나 이용 가이드는 하나로 합쳐도 될 것으로 보임.
- (공지냐 아니냐를 구분하는 것이라면 그것 밖에 불가능함.)
- [GET /notices] 엔드포인트로 모든 글을 긁어오고 카테고리에 따라 나눠서 정렬.

## 1:1 문의

- 문의 같은 경우 로그인된 상태에서만 가능해야하며 로그인 되지 않은 상태에서는 접근이 불가능하도록 링크를 막아야 함. 작성이 완료되면 서버로 데이터를 보냄.
- [POST /requests, {문의 데이터}] 엔드포인트로 데이터를 보냄. 성공하면 ok 등의 메시지를 리턴해줌. 리턴받으면 문의완료 틍의 페이지로 넘어가거나 모달을 띄워서 작성한 내용을 확인하게 한 후 메인 페이지로 돌아가게 함.

## 리뷰

- 각 상품에 적힌 리뷰들을 한 번에 모아서 볼 수 있는 페이지
- [GET /reviews] 엔드포인트로 모든 리뷰글을 가져옴.
- [GET /reviews/{id}] 로는 개별 리뷰글을 가져옴.
- 그 외에도 리뷰를 작성한 유저 정보와 주문 정보, 상품 정보를 함께 가져옴.

## 마이페이지 메인

- [GET /users/{id}] 개인정보를 불러오는 페이지이므로 유저 정보를 가져옴.
- [GET /adresses/user?user_id={user_id}] 유저의 주소 정보가 필요함.
- [GET /orders/user?userId={id}] 그리고 그 유저의 주문 개수가 필요함.

## 마이페이지 개인정보 수정

- [POST /users/passwordcheck, {비밀번호}] 개인정보를 수정하기 전 비밀번호를 입력받을 때 서버로 비밀번호를 전송함. 서버에서는 받은 비밀번호를 데이터베이스에 저장된 유저의 비밀번호와 일치하는지 확인후 true 혹은 false를 반환
- [GET /users/{id}] 개인정보를 불러와서 input에 미리 넣어두어야 함.

## 회원탈퇴

- [DELETE /users/{id}, {탈퇴 데이터}] user 테이블에 있는 회원 정보 중 status를 '탈퇴'로 변경하는 것이 탈퇴처리이며 그와 동시에 us_del 테이블에 해당 유저의 탈퇴 정보를 추가함.

## 마이페이지 비밀번호 변경

- [POST /users/passwordcheck, {비밀번호}] 개인정보를 수정하기 전 비밀번호를 입력받을 때 서버로 비밀번호를 전송함. 서버에서는 받은 비밀번호를 데이터베이스에 저장된 유저의 비밀번호와 일치하는지 확인후 true 혹은 false를 반환.
- [PUT /users/{id}, {새로운 비밀번호 데이터}] 비밀번호를 보내면 백엔드에서 암호화해서 데이터를 새로 교체해서 저장. 저장 후에는 프론트로 ok 같은 사인을 보내줌.

## 마이페이지 주소관리

- [GET /addresses/user/{userId}] 각 유저가 작성한 주소를 가져옴
- [GET /addresses/{id}] 개별 주소 가져오기
- [POST /addresses, {newData}] 새로운 주소를 추가함
- [PUT /addresses/{id}, {updateData}] 주소 하나를 수정함
- [PUT /addresses/{id}/default, {updateData}] 기본 배송지가 아닌 목록 중 하나를 선택하면 기본 배송지로 만들 수 있음.
- [DELETE /addresses/{id}] 주소 하나를 삭제함

## 관리자 유저 관리

- [GET /users] 모든 유저를 가져옴
- [DELETE /admin/users, {유저 아이디 배열}] 유저 아이디가 담긴 배열을 이용해 다수의 유저를 삭제
- [PUT /admin/users/{id}, {변경 데이터}] 개별 유저를 수정함. 마이페이지와는 다르게 모든 값을 수정할 수 있음.
- [DELETE /users/{id}, {탈퇴 데이터}] 관리자에 의한 강제 탈퇴 구현에 필요 이 요청이 가는 순간 us_del 테이블에 쌓이게 되고 실제로 유저리스트에서 사라지는 것은 아님. 유저 리스트에는 여전히 남아있지만 해당 유저의 레코드에서 status를 '탈퇴'로 변경함.

## 관리자 상품 관리

- [GET /products] 모든 상품을 가져옴
- [GET /products/{id}] 개별 상품 가져옴
- [POST /products, {상품 데이터}] 상품 추가
- [PUT /products/{id}/thumnail, {이미지 데이터}] 대표 이미지 수정
- [PUT /products/{id}/info, {기본 정보 데이터}] 기본 정보 수정
- [PUT /products/{id}/images, {이미지 데이터 배열}] 상세 이미지 수정
- [DELETE /products/{id}] 상품 삭제
- [DELETE /admin/products, {삭제 상품 아이디 배열}] 상품 여러개 삭제

## 관리자 주문 관리

- [GET /orders] 모든 주문 가져옴
- [GET /orders/{id}] 개별 주문 가져옴
- [PUT /orders/{id}] 주문 수정
- [DELETE /orders/{id}] 주문 삭제
- [GET /orderdetails/order?order_dnb={order_dnb}] 해당 주문에 대한 상품 목록 가져오기
- 주문의 생성 같은 경우는 관리자에서 진행하지 않음.

## 관리자 반품 관리

- [GET /refunds] - 모든 반품 요청 가져옴
- [GET /refunds/{id}] - 개별 반품 요청 가져옴
- [GET /orderdetails/{id}] - 개별 주문 상품 가져옴
- [GET /products/{id}] - 개별 상품 가져옴
- 반품의 경우 삭제는 보통 없는 편이며 상태의 변경만 하는 편임.
- [PUT /refunds/{id}, {수정 데이터}] 개별 반품 수정

## 관리자 리뷰 관리

- [GET /reviews] 모든 리뷰 가져옴
- [GET /reviews/{id}] 개별 리뷰 가져옴
- [GET /reviewcomments/review?review_id={review_id}] 리뷰에 대한 모든 덧글 가져옴
- [PUT /reviews/{id}, {수정 데이터}] 리뷰 수정
- [DELETE /reviews/{id}] 리뷰 삭제
- [PUT /reviewcomments/{id}, {수정 데이터}] 리뷰 덧글 수정
- [DELETE /reviewcomments/{id}] 리뷰 덧글 삭제

## 관리자 공지 관리

- [GET /norices/all] 모든 공지 가져오기
- [GET /notices/all/{id}] 개별 공지 가져오기
- [GET /notices] 카테고리가 notice인 공지 목록 가져오기
- [GET /notices/faqs] 카테고리가 notice가 아닌 공지 목록 가져오기
- [GET /notices/{id}] 카테고리가 notice인 공지 중 개별 공지 가져오기
- [GET /notices/faqs/{id}] 카테고리가 notice가 아닌 공지 중 개별 공지 가져오기
- [POST /notices/{id}, {공지 데이터}] 공지 추가하기
- [PUT /notices/{id}, {수정 데이터}] 공지 수정하기
- [DELETE /notices/{id}] 개별 공지 삭제
- [DELETE /notices, {공지 아이디 배열}] 여러 공지 삭제

## 관리자 문의 관리 (상품문의)

- [GET /questions] 모든 문의 가져오기
- [GET /questions/{id}] 개별 문의 가져오기
- [PATCH /questions/{id}, {수정 데이터}] 개별 문의 덧글 상태 수정하기
- [PUT /questions/{id}, {수정 데이터}] 개별 문의 제목, 내용 수정하기
- [DELETE /questions/{id}] 개별 문의 삭제하기
- [DELETE /questions, {아이디 배열}] 여러 문의 삭제하기
- [GET /users/{id}] 유저 정보 가져오기

## 관리자 1:1 문의 관리

- [GET /directs] 모든 문의 가져오기
- [GET /directs/{id}] 개별 문의 가져오기
- [GET /directs/user?user_id={user_id}] 해당 유저의 모든 문의 가져오기
- [PATCH /directs/{id}, {수정 데이터}] 덧글 수정하기 (등록 수정 전부 하나의 요청으로 처리함.)
- [PUT /directs/{id}, {수정 데이터}] 문의 제목, 내용, 카테고리 수정하기 관리자의 권한.
- [DELETE /directs, {아이디 배열}] 여러 문의 삭제
- [DELETE /directs/{id}] 문의 삭제
- [GET /categories/{id}] 카테고리 가져오기 (출력을 위함)
- [GET /users/{id}] 유저 정보 가져오기

## 마이페이지 마일리지 내역 - 2023 0310 추가

- [GET /users/{id}] 개별 유저를 가져옴
- [GET /orders/user?user_id={user_id}] 유저별 주문 목록을 가져옴. 마일리지 사용 정보가 이 안에 있어서 필요.

## 마이페이지 주문 목록 - 2023 0311 추가

- [GET /orders/user/{userId}] 유저의 주문 목록을 가져옴
- [GET /orders/{id}] 개별 주문을 가져옴
- [GET /orderdetails/order/{orderId}] 각 주문의 상품 리스트를 가져옴
- [GET /products/{id}] 상품 리스트 구현을 위해 필요
- [GET /orderdetails/{id}] 상품리스트 구현을 위해 필요
- [POST /refunds, {상품 반품 데이터}] 반품 요청이 들어가면 반품 테이블에 새로운 레코드 추가 그와 동시에 상품의 스테이터스를 바꿔줘야 함.

# 완료 페이지

- [x]  홈페이지
    - [x]  최신 상품 목록 가져오기
- [x]  404 에러 페이지
    - [x]  존재하지 않는 페이지일 경우 여기로 이동하게 만듬
- [x]  로그인
    - [x]  유효성 검사
- [x]  로그아웃
- [x]  회원가입
    - [ ]  유효성 검사
- [x]  아이디 찾기
- [x]  비밀번호 찾기
- [x]  상품 리스트
- [x]  상품 상세 페이지
    - [ ]  장바구니 클릭하면 선택한 상품들이 장바구니로 이동
    - [ ]  바로 구매 클릭하면 상품들이 주문 페이지로 이동 (임시)
    - [ ]  후기 리스트
    - [ ]  문의 리스트
- [x]  개인정보 처리방침
- [x]  이용약관
- [x]  장바구니
    - [x]  주문 / 결제
        - [x]  카카오 주소 API 연동
    - [x]  주문 완료
- [x]  커뮤니티
    - [x]  이용 가이드
    - [x]  공지사항
    - [x]  자주 묻는 질문
    - [x]  찾아오시는 길
        - [x]  카카오 지도 연동
    - [x]  리뷰
    - [x]  1:1 문의
    - [x]  공지사항 글 페이지
    - [x]  리뷰 글 페이지
- [x]  관리자 페이지 (가장 중요)
    - [x]  회원 정보 관리
    - [x]  상품 정보 관리
    - [x]  주문 관리
    - [x]  반품 관리
        - [x]  리스팅
        - [x]  상태 수정
        - [x]  반품 테이블은 보통 삭제하지 않고 상태만 바꿈.
    - [x]  리뷰 관리
        - [x]  리스팅
        - [x]  상세 페이지는 기존의 페이지를 사용
        - [x]  리뷰 덧글 리스팅
        - [x]  리뷰 덧글 추가
        - [x]  리뷰 수정
        - [x]  리뷰 삭제
    - [x]  공지 관리
        - [x]  공지 등록
        - [x]  공지 수정
        - [x]  리스팅
        - [x]  공지 삭제
        - [x]  공지 선택 삭제
    - [x]  문의 관리
    - [x]  1:1 문의 관리

# 예정 페이지

- [ ]  검색 결과 페이지
- [ ]  마이페이지
    - [x]  마이페이지 메인
    - [x]  개인정보 수정
    - [x]  회원 탈퇴
    - [x]  비밀번호 변경
    - [x]  주소 관리
    - [x]  마일리지 내역
    - [x]  주문 내역
        - [x]  주문 상세 페이지
    - [x]  배송 내역
        - [x]  결제가 확인된 주문 목록만 가져오기
        - [x]  배송 상태를 출력하기
        - [x]  주문번호 클릭하면 주문 조회로 넘어가기
    - [ ]  리뷰 내역
        - [ ]  리뷰 상세 페이지
        - [ ]  리뷰 작성
        - [ ]  리뷰 수정
        - [ ]  리뷰 삭제
    - [ ]  문의 목록 (1:1이랑 상품 문의 다 볼 수 있게)
    - [ ]  찜 목록
        - [ ]  하트를 누르면 아이템 제거

# 점검 완료 페이지

### 체크사항
- 필수 인풋들에 마터 달아주기
- 여러 인풋 유효성검사 하기
- 취소 버튼들 기능 처리
